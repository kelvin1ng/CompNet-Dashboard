<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}CompNet Dashboard{% endblock %}</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js for charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        background: 'oklch(1 0 0)',
                        foreground: 'oklch(0.145 0 0)',
                        card: 'oklch(1 0 0)',
                        'card-foreground': 'oklch(0.145 0 0)',
                        primary: 'oklch(0.205 0 0)',
                        'primary-foreground': 'oklch(0.985 0 0)',
                        secondary: 'oklch(0.97 0 0)',
                        'secondary-foreground': 'oklch(0.205 0 0)',
                        muted: 'oklch(0.97 0 0)',
                        'muted-foreground': 'oklch(0.556 0 0)',
                        accent: 'oklch(0.97 0 0)',
                        'accent-foreground': 'oklch(0.205 0 0)',
                        border: 'oklch(0.922 0 0)',
                        input: 'oklch(0.922 0 0)',
                        ring: 'oklch(0.708 0 0)',
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen bg-gray-50">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 px-6 py-4 shadow-sm">
        <div class="flex items-center justify-between">
            <div class="flex items-center gap-4">
                <button id="mobile-menu-toggle" class="p-2 hover:bg-gray-100 rounded-lg lg:hidden">
                    <i data-lucide="menu" class="h-5 w-5"></i>
                </button>
                <a href="{{ url_for('index') }}" class="flex items-center gap-3">
                    <img src="{{ url_for('static', filename='images/tmu-logo.png') }}" alt="Toronto Metropolitan University" class="h-10 w-10 object-contain">
                    <div class="flex flex-col">
                        <span class="font-semibold text-gray-900 text-sm">Student System Analytics</span>
                        <span class="text-xs text-gray-600">Master of Computer Networks</span>
                    </div>
                </a>
            </div>

            <div class="flex items-center gap-4">
                <!-- Search Bar -->
                <div class="relative hidden md:block">
                    <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"></i>
                    <input type="text" placeholder="Search analytics..." class="pl-10 w-64 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>

                <!-- Notifications -->
                <div class="relative" id="notifications-dropdown">
                    <button id="notifications-toggle" class="relative p-2 hover:bg-gray-100 rounded-lg">
                        <i data-lucide="bell" class="h-5 w-5"></i>
                        <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center">3</span>
                    </button>

                    <div id="notifications-panel" class="absolute right-0 top-full mt-2 w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-50 hidden">
                        <div class="p-4 border-b border-gray-100">
                            <h3 class="font-semibold text-gray-900">System Announcements</h3>
                            <p class="text-sm text-gray-600">MCN Program Updates</p>
                        </div>
                        <div class="max-h-96 overflow-y-auto">
                            <div class="p-4 border-b border-gray-50 hover:bg-gray-50 cursor-pointer bg-blue-50/30">
                                <div class="flex justify-between items-start mb-1">
                                    <h4 class="font-medium text-gray-900 text-sm">Network Lab Maintenance Scheduled</h4>
                                    <span class="text-xs text-gray-500 ml-2">15 mins ago</span>
                                </div>
                                <p class="text-sm text-gray-600">Lab 3 will be offline for router firmware updates</p>
                            </div>
                            <div class="p-4 border-b border-gray-50 hover:bg-gray-50 cursor-pointer bg-blue-50/30">
                                <div class="flex justify-between items-start mb-1">
                                    <h4 class="font-medium text-gray-900 text-sm">VM Resource Allocation Update</h4>
                                    <span class="text-xs text-gray-500 ml-2">32 mins ago</span>
                                </div>
                                <p class="text-sm text-gray-600">New VM templates available for CCNA practice labs</p>
                            </div>
                            <div class="p-4 border-b border-gray-50 hover:bg-gray-50 cursor-pointer bg-blue-50/30">
                                <div class="flex justify-between items-start mb-1">
                                    <h4 class="font-medium text-gray-900 text-sm">Exam Portal System Update</h4>
                                    <span class="text-xs text-gray-500 ml-2">53 mins ago</span>
                                </div>
                                <p class="text-sm text-gray-600">Network Security exam portal will be updated tonight</p>
                            </div>
                            <div class="p-4 border-b border-gray-50 hover:bg-gray-50 cursor-pointer">
                                <div class="flex justify-between items-start mb-1">
                                    <h4 class="font-medium text-gray-900 text-sm">Course Materials Updated</h4>
                                    <span class="text-xs text-gray-500 ml-2">2 hours ago</span>
                                </div>
                                <p class="text-sm text-gray-600">New Cisco packet tracer files uploaded for Week 8</p>
                            </div>
                            <div class="p-4 border-b border-gray-50 hover:bg-gray-50 cursor-pointer">
                                <div class="flex justify-between items-start mb-1">
                                    <h4 class="font-medium text-gray-900 text-sm">OneCard System Integration</h4>
                                    <span class="text-xs text-gray-500 ml-2">4 hours ago</span>
                                </div>
                                <p class="text-sm text-gray-600">Lab access cards now sync with student portal</p>
                            </div>
                        </div>
                        <div class="p-3 border-t border-gray-100">
                            <button class="w-full text-sm text-blue-600 hover:text-blue-700 py-2">View All Announcements</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="flex">
        <!-- Sidebar -->
        <aside id="sidebar" class="bg-gray-50 border-r border-gray-200 transition-all duration-300 w-64">
            <div class="flex flex-col h-full">
                <!-- Sidebar Toggle -->
                <div class="p-4 border-b border-gray-200">
                    <button id="sidebar-toggle" class="ml-auto p-2 hover:bg-gray-100 rounded-lg">
                        <i data-lucide="chevron-left" class="h-4 w-4"></i>
                    </button>
                </div>

                <!-- Navigation -->
                <nav class="flex-1 p-4 space-y-2">
                    <a href="{{ url_for('index') }}" class="nav-item flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {% if request.endpoint == 'index' %}bg-blue-600 text-white{% else %}text-gray-700 hover:bg-gray-100{% endif %}">
                        <i data-lucide="layout-dashboard" class="h-5 w-5 flex-shrink-0"></i>
                        <span class="nav-text">Dashboard</span>
                    </a>
                    <a href="{{ url_for('design_1') }}" class="nav-item flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {% if request.endpoint == 'design_1' %}bg-blue-600 text-white{% else %}text-gray-700 hover:bg-gray-100{% endif %}">
                        <i data-lucide="layout" class="h-5 w-5 flex-shrink-0"></i>
                        <span class="nav-text">Design 1</span>
                    </a>
                    <a href="{{ url_for('design_2') }}" class="nav-item flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {% if request.endpoint == 'design_2' %}bg-blue-600 text-white{% else %}text-gray-700 hover:bg-gray-100{% endif %}">
                        <i data-lucide="layout" class="h-5 w-5 flex-shrink-0"></i>
                        <span class="nav-text">Design 2</span>
                    </a>
                    <a href="{{ url_for('design_3') }}" class="nav-item flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {% if request.endpoint == 'design_3' %}bg-blue-600 text-white{% else %}text-gray-700 hover:bg-gray-100{% endif %}">
                        <i data-lucide="layout" class="h-5 w-5 flex-shrink-0"></i>
                        <span class="nav-text">Design 3</span>
                    </a>
                    <a href="{{ url_for('reports') }}" class="nav-item flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors {% if request.endpoint == 'reports' %}bg-blue-600 text-white{% else %}text-gray-700 hover:bg-gray-100{% endif %}">
                        <i data-lucide="file-text" class="h-5 w-5 flex-shrink-0"></i>
                        <span class="nav-text">Reports</span>
                    </a>
                </nav>

                <!-- Footer -->
                <div class="p-4 border-t border-gray-200">
                    <p class="text-xs text-gray-500 sidebar-footer">© 2025 Toronto Metropolitan University</p>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-6">
            {% block content %}{% endblock %}
        </main>
    </div>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        // Initialize Lucide icons
        lucide.createIcons();
        
        // Layout functionality
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebar-toggle');
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const notificationsToggle = document.getElementById('notifications-toggle');
            const notificationsPanel = document.getElementById('notifications-panel');
            const notificationsDropdown = document.getElementById('notifications-dropdown');
            
            let sidebarCollapsed = false;

            // Sidebar toggle functionality
            function toggleSidebar() {
                sidebarCollapsed = !sidebarCollapsed;
                
                if (sidebarCollapsed) {
                    sidebar.classList.remove('w-64');
                    sidebar.classList.add('w-16');
                    
                    // Hide nav text
                    document.querySelectorAll('.nav-text').forEach(el => el.classList.add('hidden'));
                    document.querySelector('.sidebar-footer').textContent = '© 2025 TMU';
                    
                    // Center nav items
                    document.querySelectorAll('.nav-item').forEach(el => el.classList.add('justify-center'));
                    
                    // Change chevron direction
                    sidebarToggle.innerHTML = '<i data-lucide="chevron-right" class="h-4 w-4"></i>';
                } else {
                    sidebar.classList.remove('w-16');
                    sidebar.classList.add('w-64');
                    
                    // Show nav text
                    document.querySelectorAll('.nav-text').forEach(el => el.classList.remove('hidden'));
                    document.querySelector('.sidebar-footer').textContent = '© 2025 Toronto Metropolitan University';
                    
                    // Remove center alignment
                    document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('justify-center'));
                    
                    // Change chevron direction
                    sidebarToggle.innerHTML = '<i data-lucide="chevron-left" class="h-4 w-4"></i>';
                }
                
                // Reinitialize icons
                lucide.createIcons();
            }

            // Event listeners
            sidebarToggle.addEventListener('click', toggleSidebar);
            mobileMenuToggle.addEventListener('click', toggleSidebar);

            // Notifications dropdown
            notificationsToggle.addEventListener('click', function(e) {
                e.stopPropagation();
                notificationsPanel.classList.toggle('hidden');
            });

            // Close notifications when clicking outside
            document.addEventListener('click', function(e) {
                if (!notificationsDropdown.contains(e.target)) {
                    notificationsPanel.classList.add('hidden');
                }
            });

            // Mobile responsive behavior
            function handleResize() {
                if (window.innerWidth < 1024) { // lg breakpoint
                    if (!sidebarCollapsed) {
                        sidebar.classList.add('fixed', 'left-0', 'top-16', 'z-40', 'transform', '-translate-x-full');
                    }
                } else {
                    sidebar.classList.remove('fixed', 'left-0', 'top-16', 'z-40', 'transform', '-translate-x-full');
                }
            }

            window.addEventListener('resize', handleResize);
            handleResize(); // Initial call
        });
    </script>
    
    {% block scripts %}{% endblock %}
</body>
</html>
